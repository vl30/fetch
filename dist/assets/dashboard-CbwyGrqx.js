import{_ as I,r as o,o as $,c as r,a as u,b as a,d as k,e as N,t as n,F as S,f as x,w as D,g,v as h,h as M,i as O}from"./bootstrap.bundle.min-DPQfDspY.js";const V={class:"navbar navbar-expand-lg navbar-light shadow fixed-top"},B={class:"container"},F={class:"collapse navbar-collapse",id:"navbarNav"},U={class:"navbar-nav ms-auto"},q={class:"nav-item dropdown"},R={class:"dropdown-menu"},Y={class:"jumbotron text-center pt-5",id:"home"},Z=["src"],z={class:"display-4"},A={class:"lead"},H={id:"jadwal",class:"py-5"},K={class:"container"},W={class:"row"},G={class:"card h-100 shadow-sm"},Q={class:"card-header text-white d-flex justify-content-between align-items-center"},X={class:"card-title mb-0"},aa=["onClick"],ta=["onClick"],sa={class:"card-body"},ea={class:"card-subtitle mb-2 text-muted"},na={class:"card-text"},la={id:"pengumuman",class:"py-5"},oa={class:"container"},ia={class:"row"},da={class:"card h-100 shadow-sm"},ra={class:"card-body"},ua={class:"d-flex justify-content-between align-items-start mb-3"},ca={class:"badge bg-success"},ma=["onClick"],va=["onClick"],pa={class:"card-text"},ba={class:"card-footer bg-transparent"},ga={class:"text-muted"},ha={key:0,class:"modal-backdrop"},fa={class:"modal-content"},wa={class:"modal-header"},ya={class:"modal-body"},Ca={class:"mb-3"},_a={class:"mb-3"},ja={class:"mb-3"},ka={class:"d-flex justify-content-end"},Sa={key:1,class:"modal-backdrop"},xa={class:"modal-content"},Da={class:"modal-header"},Ta={class:"modal-body"},La={class:"mb-3"},Pa={class:"mb-3"},Ja={class:"d-flex justify-content-end"},Ea={__name:"dashboard",setup($a){const m=o({}),w=o([]),y=o([]),v=o(!1),p=o(!1),c=o(!1),f=o(-1),l=o({hari:"",jam:"",mata_pelajaran:""}),i=o({isi:"",tanggal:new Date().toISOString().split("T")[0]}),T=()=>{localStorage.removeItem("loggedInStudent"),window.location.href="/login"},b=async()=>{try{const e=await fetch("http://localhost:3001/api/jadwal");w.value=await e.json();const t=await fetch("http://localhost:3001/api/pengumuman");y.value=await t.json()}catch(e){console.error("Error fetching data:",e)}},_=(e="add",t=-1)=>{if(c.value=e==="edit",f.value=t,e==="edit"){const s=w.value[t];l.value={...s}}else l.value={hari:"",jam:"",mata_pelajaran:""};v.value=!0},j=(e="add",t=-1)=>{if(c.value=e==="edit",f.value=t,e==="edit"){const s=y.value[t];i.value={isi:s.isi,tanggal:new Date(s.tanggal).toISOString().split("T")[0]}}else i.value={isi:"",tanggal:new Date().toISOString().split("T")[0]};p.value=!0},L=async()=>{try{c.value?await fetch(`http://localhost:3001/api/jadwal/${f.value}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l.value)}):await fetch("http://localhost:3001/api/jadwal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l.value)}),v.value=!1,await b()}catch(e){console.error("Error saving jadwal:",e)}},P=async()=>{try{c.value?await fetch(`http://localhost:3001/api/pengumuman/${f.value}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i.value)}):await fetch("http://localhost:3001/api/pengumuman",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i.value)}),p.value=!1,await b()}catch(e){console.error("Error saving pengumuman:",e)}},J=async e=>{if(confirm("Yakin ingin menghapus jadwal ini?"))try{await fetch(`http://localhost:3001/api/jadwal/${e}`,{method:"DELETE"}),await b()}catch(t){console.error("Error deleting jadwal:",t)}},E=async e=>{if(confirm("Yakin ingin menghapus pengumuman ini?"))try{await fetch(`http://localhost:3001/api/pengumuman/${e}`,{method:"DELETE"}),await b()}catch(t){console.error("Error deleting pengumuman:",t)}};return $(async()=>{const e=localStorage.getItem("loggedInStudent");e&&(m.value=JSON.parse(e)),await b()}),(e,t)=>(u(),r("body",null,[a("nav",V,[a("div",B,[t[13]||(t[13]=a("a",{class:"navbar-brand",href:"#"},"Dashboard",-1)),t[14]||(t[14]=a("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[a("span",{class:"navbar-toggler-icon"})],-1)),a("div",F,[a("ul",U,[t[12]||(t[12]=N('<li class="nav-item ms-2" data-v-5728a29f><button class="btn btn-outline-dark" id="themeToggle" data-v-5728a29f><i class="bi bi-moon-fill" data-v-5728a29f></i></button></li><li class="nav-item" data-v-5728a29f><a class="nav-link" href="#jadwal" data-v-5728a29f>Jadwal</a></li><li class="nav-item" data-v-5728a29f><a class="nav-link" href="#pengumuman" data-v-5728a29f>Pengumuman</a></li>',3)),a("li",q,[t[11]||(t[11]=a("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown"}," Kelola Data ",-1)),a("ul",R,[a("li",null,[a("a",{class:"dropdown-item",href:"#",onClick:t[0]||(t[0]=s=>_())},"Tambah Jadwal")]),a("li",null,[a("a",{class:"dropdown-item",href:"#",onClick:t[1]||(t[1]=s=>j())},"Tambah Pengumuman")])])]),a("li",{class:"nav-item"},[a("button",{class:"btn btn-warning",onClick:T}," Logout ")])])])])]),a("div",Y,[a("img",{src:m.value.foto||"https://via.placeholder.com/150",alt:"Student Photo",width:"200px",class:"rounded-circle img-thumbnail"},null,8,Z),a("h1",z,n(m.value.nama||"Welcome"),1),a("p",A,n(m.value.kelas||"Student")+" | "+n(m.value.nis||"-"),1),t[15]||(t[15]=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"},[a("path",{fill:"white","fill-opacity":"1",d:"M0,256L20,245.3C40,235,80,213,120,176C160,139,200,85,240,69.3C280,53,320,75,360,80C400,85,440,75,480,101.3C520,128,560,192,600,208C640,224,680,192,720,170.7C760,149,800,139,840,144C880,149,920,171,960,192C1000,213,1040,235,1080,250.7C1120,267,1160,277,1200,272C1240,267,1280,245,1320,208C1360,171,1400,117,1420,90.7L1440,64L1440,320L1420,320C1400,320,1360,320,1320,320C1280,320,1240,320,1200,320C1160,320,1120,320,1080,320C1040,320,1000,320,960,320C920,320,880,320,840,320C800,320,760,320,720,320C680,320,640,320,600,320C560,320,520,320,480,320C440,320,400,320,360,320C320,320,280,320,240,320C200,320,160,320,120,320C80,320,40,320,20,320L0,320Z"})],-1))]),a("section",H,[a("div",K,[t[18]||(t[18]=a("div",{class:"row text-center mb-5"},[a("div",{class:"col"},[a("h2",null,"Jadwal Pelajaran"),a("p",{class:"text-muted"},"Jadwal mata pelajaran mingguan")])],-1)),a("div",W,[(u(!0),r(S,null,x(w.value,(s,d)=>(u(),r("div",{key:d,class:"col-md-4 mb-4"},[a("div",G,[a("div",Q,[a("h5",X,n(s.hari),1),a("div",null,[a("button",{class:"btn btn-sm btn-light me-1",onClick:C=>_("edit",d)},t[16]||(t[16]=[a("i",{class:"bi bi-pencil"},null,-1)]),8,aa),a("button",{class:"btn btn-sm btn-danger",onClick:C=>J(d)},t[17]||(t[17]=[a("i",{class:"bi bi-trash"},null,-1)]),8,ta)])]),a("div",sa,[a("h6",ea,n(s.jam),1),a("p",na,n(s.mata_pelajaran),1)])])]))),128))])])]),t[30]||(t[30]=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"},[a("path",{fill:"#FF894F","fill-opacity":"1",d:"M0,128L40,112C80,96,160,64,240,64C320,64,400,96,480,96C560,96,640,64,720,48C800,32,880,32,960,58.7C1040,85,1120,139,1200,133.3C1280,128,1360,64,1400,32L1440,0L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"})],-1)),a("section",la,[a("div",oa,[t[22]||(t[22]=a("div",{class:"row text-center mb-5"},[a("div",{class:"col"},[a("h2",null,"Pengumuman"),a("p",{class:"text-muted"},"Informasi terbaru dan pengumuman penting")])],-1)),a("div",ia,[(u(!0),r(S,null,x(y.value,(s,d)=>(u(),r("div",{key:d,class:"col-md-6 mb-4"},[a("div",da,[a("div",ra,[a("div",ua,[a("span",ca,n(new Date(s.tanggal).toLocaleDateString("id-ID")),1),a("div",null,[a("button",{class:"btn btn-sm btn-outline-primary me-1",onClick:C=>j("edit",d)},t[19]||(t[19]=[a("i",{class:"bi bi-pencil"},null,-1)]),8,ma),a("button",{class:"btn btn-sm btn-outline-danger",onClick:C=>E(d)},t[20]||(t[20]=[a("i",{class:"bi bi-trash"},null,-1)]),8,va)])]),a("p",pa,n(s.isi),1)]),a("div",ba,[a("small",ga,[t[21]||(t[21]=a("i",{class:"bi bi-calendar-event me-1"},null,-1)),M(" "+n(new Date(s.tanggal).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),1)])])])]))),128))])])]),v.value?(u(),r("div",ha,[a("div",fa,[a("div",wa,[a("h5",null,n(c.value?"Edit":"Tambah")+" Jadwal",1),a("button",{onClick:t[2]||(t[2]=s=>v.value=!1)},"×")]),a("div",ya,[a("form",{onSubmit:D(L,["prevent"])},[a("div",Ca,[t[23]||(t[23]=a("label",{class:"form-label"},"Hari",-1)),g(a("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.hari=s),type:"text",class:"form-control",required:""},null,512),[[h,l.value.hari]])]),a("div",_a,[t[24]||(t[24]=a("label",{class:"form-label"},"Jam",-1)),g(a("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.jam=s),type:"text",class:"form-control",required:""},null,512),[[h,l.value.jam]])]),a("div",ja,[t[25]||(t[25]=a("label",{class:"form-label"},"Mata Pelajaran",-1)),g(a("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.mata_pelajaran=s),type:"text",class:"form-control",required:""},null,512),[[h,l.value.mata_pelajaran]])]),a("div",ka,[a("button",{type:"button",class:"btn btn-secondary me-2",onClick:t[6]||(t[6]=s=>v.value=!1)}," Batal "),t[26]||(t[26]=a("button",{type:"submit",class:"btn btn-primary"}," Simpan ",-1))])],32)])])])):k("",!0),p.value?(u(),r("div",Sa,[a("div",xa,[a("div",Da,[a("h5",null,n(c.value?"Edit":"Tambah")+" Pengumuman",1),a("button",{onClick:t[7]||(t[7]=s=>p.value=!1)},"×")]),a("div",Ta,[a("form",{onSubmit:D(P,["prevent"])},[a("div",La,[t[27]||(t[27]=a("label",{class:"form-label"},"Isi Pengumuman",-1)),g(a("textarea",{"onUpdate:modelValue":t[8]||(t[8]=s=>i.value.isi=s),class:"form-control",rows:"3",required:""},null,512),[[h,i.value.isi]])]),a("div",Pa,[t[28]||(t[28]=a("label",{class:"form-label"},"Tanggal",-1)),g(a("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>i.value.tanggal=s),type:"date",class:"form-control",required:""},null,512),[[h,i.value.tanggal]])]),a("div",Ja,[a("button",{type:"button",class:"btn btn-secondary me-2",onClick:t[10]||(t[10]=s=>p.value=!1)}," Batal "),t[29]||(t[29]=a("button",{type:"submit",class:"btn btn-primary"}," Simpan ",-1))])],32)])])])):k("",!0),t[31]||(t[31]=a("footer",{class:"bg-dark text-white py-4"},[a("div",{class:"container text-center"},[a("p",{class:"mb-0"},"© 2025 Dashboard. By Naufal Dzakwan")])],-1))]))}},Ia=I(Ea,[["__scopeId","data-v-5728a29f"]]);O(Ia).mount("#dashboard");
